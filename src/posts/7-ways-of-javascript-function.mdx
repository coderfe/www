---
title: ã€è¯‘ã€åˆ›å»º JavaScript å‡½æ•°çš„ 7 ç§æ–¹å¼
date: 2019-01-13
tldr: è®¤è¯† JavaScript ä¸€ç­‰å…¬æ°‘â€”â€”å‡½æ•°ï¼Œä»¥åŠæ‰€ä»¥å…³äºå®ƒçš„å®šä¹‰æˆ–å£°æ˜æ–¹å¼ã€‚
tags: ['JavaScript', 'è¯‘æ–‡']
---

## å‡½æ•°

ä¸€ä¸ªå¯ä»¥å†™ä¸€æœ¬ä¹¦çš„ JavaScript å‡½æ•°ï¼Œæˆ‘æƒ³å…¶ä»–äººä¹Ÿæœ‰è¿™ç§æƒ³æ³•ã€‚

ä½†æ˜¯ä»Šå¤©æˆ‘ä»¬é•¿è¯çŸ­è¯´ã€‚ä¸å…¶ä»–æ¯”è¾ƒæµè¡Œçš„è¯­è¨€ï¼ˆå¦‚ Javaï¼‰ç›¸æ¯”ï¼Œå‡½æ•°è¢«è®¤ä¸ºæ˜¯ JavaScript è¯­è¨€ä¸­çš„ç¬¬ä¸€ç­‰å…¬æ°‘ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥å°†å®ƒä»¬ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œè®©å‡½æ•°è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œç”šè‡³å°†å‡½æ•°ä½œä¸º JavaScript è¯­è¨€ä¸­çš„ä»»ä½•å…¶å®ƒç±»å‹çš„å€¼ã€‚ä¾‹å¦‚ï¼Œå‡½æ•°å¯ä»¥æ˜¯ JavaScript å¯¹è±¡ä¸­çš„ä¸€ä¸ªå±æ€§ï¼ˆå‘½åæ–¹æ³•ï¼‰ã€‚

äº‹å®ä¸Šï¼Œå‡½æ•°ç¡®å®æ˜¯ JavaScript ä¸­çš„ä¸€ç­‰å…¬æ°‘ï¼Œå› æ­¤ä½¿å¾—è¿™é—¨è¯­è¨€éå¸¸çµæ´»ã€‚ä¾‹å¦‚ï¼Œä½ åœ¨ JavaScript ä¸­å¯ä»¥ä½¿ç”¨å‡½æ•°åˆ›å»º*é—­åŒ…*ï¼š

```javascript
function counter() {
  let count = 0

  function increment() {
    return ++count
  }

  return increment
}

const coolClosureCounter = counter()

coolClosureCounter() // 1
coolClosureCounter() // 2
```

## åˆ›å»ºå‡½æ•°çš„ 7 ä¸­æ–¹å¼

è®© JavaScript æ–°æ‰‹æ¯”è¾ƒå›°æƒ‘çš„æ˜¯å‡½æ•°çš„å£°æ˜ã€‚åœ¨ [MDN][mdn] é‡Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°å¯¹å‡½æ•°å®šä¹‰çš„å®šä¹‰ï¼š

ä¸€ä¸ª JavaScript å‡½æ•°ç”¨ function å…³é”®å­—å£°æ˜ï¼Œåé¢è·Ÿç€å‡½æ•°åå’Œåœ†æ‹¬å· `()`ã€‚

åœ¨ç†Ÿæ‚‰ JavaScript ä¹‹åï¼Œè¯¥è¯­å¥ä»ç„¶æœ‰æ•ˆã€‚ä½†æ˜¯æˆ‘è¦å‘ä½ å±•ç¤ºï¼Œåœ¨ 2018 å¹´ä»¥ 7 ä¸­ä¸åŒçš„æ–¹å¼åˆ›å»º JavaScript å‡½æ•°ã€‚

### å‡½æ•°å£°æ˜/å®šä¹‰/è¯­å¥

```javascript
function foo() {
  console.log('Fun with Functions')
}
```

æˆ‘æƒ³è¿™æ˜¯æˆ‘ä»¬å­¦çš„ç¬¬ä¸€ç§æ–¹å¼ï¼Œæ²¡ä»€ä¹ˆç¨€å¥‡çš„ã€‚çœ‹èµ·æ¥å’Œå…¶å®ƒè¯­è¨€å¾ˆç±»ä¼¼ã€‚

### å‡½æ•°è¡¨è¾¾å¼

```javascript
const myFunction = function () {
  console.log('Fun with Functions')
}
```

æ³¨æ„ï¼Œå¦‚æœä½ åœ¨å£°æ˜å‡½æ•°è¡¨è¾¾å¼ä¹‹å‰è°ƒç”¨å®ƒï¼Œé‚£ä¹ˆå°±ä¼šå‡ºé”™ï¼š

```javascript
foo() // Uncaught ReferenceError: foo is undefined

const foo = function () {
  console.log('Hei!')
}
```

### ç®­å¤´å‡½æ•°

```javascript
;() => console.log('Fun with Functions')
```

åœ¨ ES2015ï¼ˆå³ ES6ï¼‰ ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨éå¸¸å°å·§æ–¹ä¾¿çš„ç®­å¤´å‡½æ•°è¡¨è¾¾å¼ã€‚è¿™ä¸ªè¯­æ³•åœ¨é“¾æ¥å†…ç½®çš„ `map/filter/reduce` ç­‰æ–¹æ³•æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚æœ‰ç‚¹åƒä¸‹é¢çš„ä¾‹å­ï¼š

```javascript
const names = [
  'Eirik',
  'Nicolai',
  'Henrik',
  'Jan',
  'Paal Kristian',
  'Kristine',
  'Espen',
]

names.filter((name) => name.length > 5).map((name) => name.toLowerCase())
// ["nicolai", "henrik", "paal kristian", "kristine"]
```

ä½†æ˜¯åœ¨ä½¿ç”¨ç®­å¤´å‡½æ•°ä¹‹å‰ï¼Œè¯·è€ƒè™‘ä»¥ä¸‹å‡ ä¸ªäº‹é¡¹ï¼š

- å‡½æ•°ä½“å†…æ²¡æœ‰ç‰¹æ®Šçš„ `arguments` å¯¹è±¡
- ä½ ä¸èƒ½ä½¿ç”¨ `new (() => {})`
- [ç®­å¤´å‡½æ•°æ²¡æœ‰å±äºè‡ªå·±çš„ `this`ã€`arguments`ã€`super` æˆ–è€… `new.target`][arrow-functions]

### å‡½æ•°çš„æ„é€ å‡½æ•°

å¥½å§ï¼Œè¿™å¾ˆå°´å°¬ã€‚è¿™ç§æ–¹å¼ä¸ç®€å•ä¹Ÿä¸ç›´è§‚ã€‚è€Œä¸” MDN ä¸æ¨èè¿™ç§æ–¹å¼ã€‚ä½†æ˜¯å¦‚æœä½ çŸ¥é“ä¸€ç§ç”¨æ³•ï¼Œæˆ‘ä»¬å¾ˆä¹æ„äº†è§£ã€‚

```javascript
const myStrangeFunc = new Function('a', "console.log(a + 'with Functions')")
myStrangeFunc('Fun') // Fun with Functions
```

å‡½æ•°ä½“æ˜¯ç”±ä¸€ä¸ªå­—ç¬¦ä¸²åˆ›å»ºçš„ï¼Ÿï¼æœ‰è¶£çš„å‡½æ•°å‘€ï¼è¿˜æ²¡æœ‰ç»“æŸå‘¢ ğŸ¤“ã€‚

### å…¶å®ƒæ–¹å¼â€¦â€¦

- ç”Ÿæˆå™¨å‡½æ•°è¡¨è¾¾å¼
- ç”Ÿæˆå™¨å‡½æ•°å£°æ˜
- ç”Ÿæˆå™¨å‡½æ•°æ„é€ å‡½æ•°

ç”Ÿæˆå™¨å‡½æ•°ä¸æ˜¯è¿™ç¯‡æ–‡ç« çš„ä¸»é¢˜ã€‚[åœ¨è¿™é‡ŒæŸ¥çœ‹æ›´å¤šä¿¡æ¯][generator-functions]ã€‚

### IIFE å’ŒåŒ¿åå‡½æ•°

å‡½æ•°éå¸¸é…·ï¼Œå®ƒä»¬ä¹Ÿå¯ä»¥æ˜¯åŒ¿åçš„ã€‚åœ¨ JavaScript ä¸­ï¼Œæˆ‘ä»¬å…è®¸æœªå‘½åçš„å‡½æ•°ã€‚ä½ çŸ¥é“å¯ä»¥ç«‹å³è°ƒç”¨å®ƒä»¬å—ï¼Ÿç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFEï¼‰ï¼š

```javascript
;(function () {
  // ......
})()
```

[mdn]: https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Functions
[arrow-functions]: https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions
[generator-functions]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions
